# 事件驱动系统设计

基于Apache Kafka的流服务概念和模式 (Ben Stopford)

![coverpage](E:\GIT_new\Desigining_Event_Driven_Systems\coverpage.png) 

## 前言

## 序言

------

## 第一部分：引论

### 1. 概述

### 2.  流的起源

### 3. Kafka是你想象中的样子吗？

#### 	Kafka像REST但却是异步的

#### 	Kafka像一个服务总线

#### 	Kafka像一个数据库

#### 	Kafka究竟是什么？—— 一个流平台

### 4. 不止是消息：Kafka Broker概述

#### 	日志：消息保存和分发的高效结构

#### 	线性扩展能力

#### 	多服务生态系统中的负载隔离

#### 	维持健壮的有序保障

#### 	确保消息持久性

#### 	服务的负载均衡和高可用

#### 	主题压缩(Compacted Topics)

#### 	长期数据存储

#### 	安全

#### 	小结

------

## 第二部分：设计事件驱动系统

### 5. 事件：协作的基础

#### 	命令、事件、请求

#### 	耦合和消息代理

#### 	使用事件进行通知

#### 	使用事件提供状态变化

#### 	使用哪种方式

#### 	事件协作模式

#### 	流处理间关系

#### 	请求和事件驱动协议混合

#### 	小结

### 6. 用状态函数处理事件

#### 	使服务有状态

#### 	小结

### 7.  事件溯源，CQRS，其他状态模式

（Command Query Responsibility Segregation 就是通常所说的读写隔离）

#### 	事件溯源、命令溯源、CQRS

#### 	数据的版本控制

#### 	让事件源于事实

#### 	命名查询职责分离

#### 	物化视图

#### 	多语言视图

#### 	全部事实或偏差？

#### 	用Kafka实现事件溯源和CQRS(命令查询职责分离)

#### 	小结

------

## 第三部分  重思企业级架构

### 8. 数据和服务的跨域共享

#### 	封装并不总是友好的

#### 	数据二分法

#### 	系统演变时发生了什么？

#### 	让外部数据成为一等公民

#### 	不要害怕演变

#### 	小结

### 9. 事件流作为共享的源事实

#### 	颠倒的数据库

#### 	小结

### 10. 精益数据

#### 	如果消息能记录，数据库就没必要记录

#### 	只取需要的数据，仅此而已

#### 	重建事件溯源视图

#### 	自动化和Schema迁移

#### 	小结

------

## 第四部分 一致性，并发，和演进

### 11. 事件驱动系统中的一致性和并发

#### 	事件的一致性

#### 	单独写原则

#### 	事务的原子化

#### 	标识和并发控制

#### 	局限性

#### 	小结

### 12. 事务，不是我们已知的那样

#### 	重复问题

#### 	使用事务API去除重复

#### 一次性完成幂等和原子提交

#### Kafka底层事务机制

#### 状态存储和事件发送的原子化

#### 是否需要事务？能否用幂等实现？

#### 哪些是事务不能处理的？

#### 在服务中利用事务

#### 小结

------

### 13. Schemas和数据随着时间的演变

#### 使用Schemas及时管理数据演变

#### 处理Schema变化和向后兼容

#### 在Schema变化中协作

#### 处理不可读消息

#### 删除数据

#### 区分公共和私有主题

#### 小结

------

## 第五部分 用Kafka实现流服务

### 14.Kafka流和KSQL

#### 用Kafka流和KSQL构建简单邮件服务

#### 窗口、合并、表和状态存储

#### 小结

### 15. 构建流式服务

#### 订单验证系统

#### 合并-过滤-处理

#### Kafka流中的事件溯源视图

#### 一个阻塞读使CQRS崩溃

#### 并发操作在流系统中的扩展

#### 合并的密钥更新

#### 重新分区和阶段执行

#### 等待N事件

#### 设计的体现

#### 一个更完整的流系统

#### 小结























